# Time-Service-Kubernetes
Web-сервис для показа времени и имени сервера и Bash-скрипт для развёртывания данной системы в Kubernetes

## Текстовая пошаговая инструкция для Ubuntu Focal

[steps_for_ubuntu_focal.txt](https://github.com/Relz/Time-Service-Kubernetes/blob/master/steps_for_ubuntu_focal.txt)

## Видео-демонстрация

[Настройка мастер-ноды](https://youtu.be/efZ5Oi0ppVQ)

Запускаю скрипт. Он говорит, что нужно запускать либо с целью настроить master-ноду, либо с целью настроить worker-ноду. И та и другая цель требует установки docker, kubeadm, kubelet, kubectl, а также выключения SWAP. Скрипт проверяет всё это и не работает, пока не удовлетворяться эти условия. Однако, реализация лежит на саом пользователе, сам скрипт не устанавливает пакеты и не выключает SWAP. Потому что сложно сделать универсальную установку пакетов. В Ubuntu установка этих пакетов выглядит сложной (так оно и есть), хотя в ArchLinux это выглядело бы, грубо говоря, как-то так: "Установи docker, kubeadm, kubelet, kubectl". В Ubuntu же нужно предварительно добавить ключи и источники, откуда эти пакеты можно скачать.

Там в конце видно, будто мастер-нода NotReady. На самом деле Ready, просто нужно было ещё пару секунд подождать.

[Настройка рабочей ноды. Часть 1](https://youtu.be/Ew6j9fVRWhg)

Там в конце видно, как я терплю фиаско (.kube/config: no such file or directory). Да, это потому что конфиг, сгенерированный на мастер-ноде забыл скопировать в рабочую ноду. Автоматизировать этот процесс не очень просто, хотя возможно, но я ручками скопировал.

[Настройка рабочей ноды. Часть 2](https://youtu.be/iGOhYktV_rg)

Показываю, как инициализация рабочей ноды прошла успешно, в кластере обе ноды Ready. Создаю deployment с моим Time-Service (залитый docker-образ на Docker-Hub), пробрасываю порт для образа. Узнаю ip-адрес рабочей ноды и выделенный внешний порт. Захожу по ip:port из Хостовой машины в браузере, показываю, что всё работает.
